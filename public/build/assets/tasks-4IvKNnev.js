import{r as c,j as f,e as q,J as G}from"./app-B9I0P2Ry.js";import{C as K,f as J,u as V}from"./tasks-api-service-Dfg64-qD.js";import{u as E,a as X}from"./index-FfgafLC4.js";import{P}from"./index-y7iH-PPG.js";import{F as Z,c as Q}from"./index.es-BuPjepZ7.js";import Y from"./error-page-CLHicewq.js";/* empty css            */function H(e,t=[]){let n=[];function i(r,d){const o=c.createContext(d),a=n.length;n=[...n,d];const l=m=>{var x;const{scope:p,children:h,...b}=m,g=((x=p==null?void 0:p[e])==null?void 0:x[a])||o,C=c.useMemo(()=>b,Object.values(b));return f.jsx(g.Provider,{value:C,children:h})};l.displayName=r+"Provider";function u(m,p){var g;const h=((g=p==null?void 0:p[e])==null?void 0:g[a])||o,b=c.useContext(h);if(b)return b;if(d!==void 0)return d;throw new Error(`\`${m}\` must be used within \`${r}\``)}return[l,u]}const s=()=>{const r=n.map(d=>c.createContext(d));return function(o){const a=(o==null?void 0:o[e])||r;return c.useMemo(()=>({[`__scope${e}`]:{...o,[e]:a}}),[o,a])}};return s.scopeName=e,[i,ee(s,...t)]}function ee(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const i=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(r){const d=i.reduce((o,{useScope:a,scopeName:l})=>{const m=a(r)[`__scope${l}`];return{...o,...m}},{});return c.useMemo(()=>({[`__scope${t.scopeName}`]:d}),[d])}};return n.scopeName=t.scopeName,n}function I(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e==null||e(s),n===!1||!s.defaultPrevented)return t==null?void 0:t(s)}}var k=globalThis!=null&&globalThis.document?c.useLayoutEffect:()=>{},te=q[" useInsertionEffect ".trim().toString()]||k;function ne({prop:e,defaultProp:t,onChange:n=()=>{},caller:i}){const[s,r,d]=re({defaultProp:t,onChange:n}),o=e!==void 0,a=o?e:s;{const u=c.useRef(e!==void 0);c.useEffect(()=>{const m=u.current;m!==o&&console.warn(`${i} is changing from ${m?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=o},[o,i])}const l=c.useCallback(u=>{var m;if(o){const p=oe(u)?u(e):u;p!==e&&((m=d.current)==null||m.call(d,p))}else r(u)},[o,e,r,d]);return[a,l]}function re({defaultProp:e,onChange:t}){const[n,i]=c.useState(e),s=c.useRef(n),r=c.useRef(t);return te(()=>{r.current=t},[t]),c.useEffect(()=>{var d;s.current!==n&&((d=r.current)==null||d.call(r,n),s.current=n)},[n,s]),[n,i,r]}function oe(e){return typeof e=="function"}function se(e){const t=c.useRef({value:e,previous:e});return c.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function ce(e){const[t,n]=c.useState(void 0);return k(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const i=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const r=s[0];let d,o;if("borderBoxSize"in r){const a=r.borderBoxSize,l=Array.isArray(a)?a[0]:a;d=l.inlineSize,o=l.blockSize}else d=e.offsetWidth,o=e.offsetHeight;n({width:d,height:o})});return i.observe(e,{box:"border-box"}),()=>i.unobserve(e)}else n(void 0)},[e]),t}function ie(e,t){return c.useReducer((n,i)=>t[n][i]??n,e)}var _=e=>{const{present:t,children:n}=e,i=ae(t),s=typeof n=="function"?n({present:i.isPresent}):c.Children.only(n),r=E(i.ref,ue(s));return typeof n=="function"||i.isPresent?c.cloneElement(s,{ref:r}):null};_.displayName="Presence";function ae(e){const[t,n]=c.useState(),i=c.useRef(null),s=c.useRef(e),r=c.useRef("none"),d=e?"mounted":"unmounted",[o,a]=ie(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return c.useEffect(()=>{const l=y(i.current);r.current=o==="mounted"?l:"none"},[o]),k(()=>{const l=i.current,u=s.current;if(u!==e){const p=r.current,h=y(l);e?a("MOUNT"):h==="none"||(l==null?void 0:l.display)==="none"?a("UNMOUNT"):a(u&&p!==h?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,a]),k(()=>{if(t){let l;const u=t.ownerDocument.defaultView??window,m=h=>{const g=y(i.current).includes(h.animationName);if(h.target===t&&g&&(a("ANIMATION_END"),!s.current)){const C=t.style.animationFillMode;t.style.animationFillMode="forwards",l=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=C)})}},p=h=>{h.target===t&&(r.current=y(i.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{u.clearTimeout(l),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else a("ANIMATION_END")},[t,a]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:c.useCallback(l=>{i.current=l?getComputedStyle(l):null,n(l)},[])}}function y(e){return(e==null?void 0:e.animationName)||"none"}function ue(e){var i,s;let t=(i=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:i.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var w="Checkbox",[de,Pe]=H(w),[le,R]=de(w);function fe(e){const{__scopeCheckbox:t,checked:n,children:i,defaultChecked:s,disabled:r,form:d,name:o,onCheckedChange:a,required:l,value:u="on",internal_do_not_use_render:m}=e,[p,h]=ne({prop:n,defaultProp:s??!1,onChange:a,caller:w}),[b,g]=c.useState(null),[C,x]=c.useState(null),v=c.useRef(!1),S=b?!!d||!!b.closest("form"):!0,j={checked:p,disabled:r,setChecked:h,control:b,setControl:g,name:o,form:d,value:u,hasConsumerStoppedPropagationRef:v,required:l,defaultChecked:N(s)?!1:s,isFormControl:S,bubbleInput:C,setBubbleInput:x};return f.jsx(le,{scope:t,...j,children:me(m)?m(j):i})}var M="CheckboxTrigger",T=c.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...i},s)=>{const{control:r,value:d,disabled:o,checked:a,required:l,setControl:u,setChecked:m,hasConsumerStoppedPropagationRef:p,isFormControl:h,bubbleInput:b}=R(M,e),g=E(s,u),C=c.useRef(a);return c.useEffect(()=>{const x=r==null?void 0:r.form;if(x){const v=()=>m(C.current);return x.addEventListener("reset",v),()=>x.removeEventListener("reset",v)}},[r,m]),f.jsx(P.button,{type:"button",role:"checkbox","aria-checked":N(a)?"mixed":a,"aria-required":l,"data-state":D(a),"data-disabled":o?"":void 0,disabled:o,value:d,...i,ref:g,onKeyDown:I(t,x=>{x.key==="Enter"&&x.preventDefault()}),onClick:I(n,x=>{m(v=>N(v)?!0:!v),b&&h&&(p.current=x.isPropagationStopped(),p.current||x.stopPropagation())})})});T.displayName=M;var O=c.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:i,checked:s,defaultChecked:r,required:d,disabled:o,value:a,onCheckedChange:l,form:u,...m}=e;return f.jsx(fe,{__scopeCheckbox:n,checked:s,defaultChecked:r,disabled:o,required:d,onCheckedChange:l,name:i,form:u,value:a,internal_do_not_use_render:({isFormControl:p})=>f.jsxs(f.Fragment,{children:[f.jsx(T,{...m,ref:t,__scopeCheckbox:n}),p&&f.jsx(z,{__scopeCheckbox:n})]})})});O.displayName=w;var L="CheckboxIndicator",$=c.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:i,...s}=e,r=R(L,n);return f.jsx(_,{present:i||N(r.checked)||r.checked===!0,children:f.jsx(P.span,{"data-state":D(r.checked),"data-disabled":r.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});$.displayName=L;var U="CheckboxBubbleInput",z=c.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:i,hasConsumerStoppedPropagationRef:s,checked:r,defaultChecked:d,required:o,disabled:a,name:l,value:u,form:m,bubbleInput:p,setBubbleInput:h}=R(U,e),b=E(n,h),g=se(r),C=ce(i);c.useEffect(()=>{const v=p;if(!v)return;const S=window.HTMLInputElement.prototype,A=Object.getOwnPropertyDescriptor(S,"checked").set,F=!s.current;if(g!==r&&A){const W=new Event("click",{bubbles:F});v.indeterminate=N(r),A.call(v,N(r)?!1:r),v.dispatchEvent(W)}},[p,g,r,s]);const x=c.useRef(N(r)?!1:r);return f.jsx(P.input,{type:"checkbox","aria-hidden":!0,defaultChecked:d??x.current,required:o,disabled:a,name:l,value:u,form:m,...t,tabIndex:-1,ref:b,style:{...t.style,...C,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});z.displayName=U;function me(e){return typeof e=="function"}function N(e){return e==="indeterminate"}function D(e){return N(e)?"indeterminate":e?"checked":"unchecked"}/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),B=(...e)=>e.filter((t,n,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var he={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=c.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:s="",children:r,iconNode:d,...o},a)=>c.createElement("svg",{ref:a,...he,width:t,height:t,stroke:e,strokeWidth:i?Number(n)*24/Number(t):n,className:B("lucide",s),...o},[...d.map(([l,u])=>c.createElement(l,u)),...Array.isArray(r)?r:[r]]));/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=(e,t)=>{const n=c.forwardRef(({className:i,...s},r)=>c.createElement(xe,{ref:r,iconNode:t,className:B(`lucide-${pe(e)}`,i),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ve=be("Check",ge);function Ce({className:e,...t}){return f.jsx(O,{"data-slot":"checkbox",className:X("peer border-input data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:f.jsx($,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:f.jsx(ve,{className:"size-3.5"})})})}function Re(){const[e,t]=c.useState(null),[n,i]=c.useState(!0),[s,r]=c.useState(null);c.useEffect(()=>{(async()=>{try{const l=(await J()).data.map(u=>({id:u.id,title:u.title,description:u.description,completed:u.completed===1,opportunity:u.opportunity.title,created:u.created_at}));t(l)}catch(a){r("Error al cargar las tareas"),console.error(a)}finally{i(!1)}})()},[]);const d=async o=>{const a=e==null?void 0:e.find(u=>u.id===o);if(!a)return;const l=!a.completed;try{await V(o,{completed:l}),t(u=>u?u.map(m=>m.id===o?{...m,completed:l}:m):[])}catch(u){console.error("Error al actualizar la tarea:",u)}};return n?f.jsx("div",{children:"Cargando tareas..."}):s?f.jsx(Y,{}):f.jsx("div",{className:"bg-gray-100 min-h-screen py-6 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-3xl mx-auto",children:[f.jsxs(G,{href:"/dashboard",className:"inline-flex items-center text-blue-600 hover:underline font-semibold mb-4",children:[f.jsx(Z,{icon:Q,className:"mr-2"})," Volver a Dashboard"]}),f.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Gestión de Tareas del CRM"}),f.jsx("div",{className:"space-y-4",children:e&&e.map(o=>f.jsx(K,{onClick:()=>d(o.id),className:"bg-white shadow overflow-hidden rounded-md cursor-pointer hover:bg-gray-50 transition",children:f.jsxs("div",{className:"px-4 py-5 sm:p-6 flex items-start gap-4",children:[f.jsx("div",{className:"flex items-center",children:f.jsx(Ce,{className:"h-5 w-5 accent-blue-500 pointer-events-none",checked:o.completed,onChange:()=>{}})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("div",{className:`text-lg font-medium ${o.completed?"line-through text-gray-400":"text-gray-900"}`,children:o.title}),f.jsx("span",{className:`mt-1 text-sm text-gray-500 ${o.completed?"line-through":""}`,children:o.description}),f.jsxs("div",{className:"mt-2 text-sm text-gray-500",children:[f.jsxs("span",{className:"block",children:[f.jsx("strong",{children:"Oportunidad:"})," ",o.opportunity]}),f.jsxs("span",{className:"block",children:[f.jsx("strong",{children:"Creado:"})," ",new Date(o.created).toLocaleDateString()]})]})]}),f.jsx("div",{className:"ml-2",children:f.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${o.completed?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:o.completed?"Completado":"Por hacer"})})]})},o.id))})]})})}export{Re as default};
